class Watch{constructor(t){this.options=t,this.currentTimezone="http://worldtimeapi.org/api/ip",this.worldTimeApi="http://worldtimeapi.org/api/timezone/",this.global=document.querySelector(this.options.watch),this.timezoneList=document.querySelector(this.options.city+" select"),this.time=document.querySelector(this.options.time),this.weekday=document.querySelector(this.options.weekday),this.interval=5e3,this.city={},this.farm={set:(t,e)=>{let i=document.createElement(t);if(!e)return i;for(let t in e.attributes)i.setAttribute(t,e.attributes[t]);return i.innerHTML=e.html,i},setInside:(t,e,i)=>{i.appendChild(this.farm.set(t,e))}}}setInterval(t){t&&!NaN(t)&&(this.interval=Number(t))}fetchList(){return fetch(this.worldTimeApi).then(t=>t.json()).then(t=>{t.filter(t=>/Europe/.test(t)?t:null).forEach(t=>{this.farm.setInside("option",{attributes:{value:t},html:t.split("/")[1]},this.timezoneList)}),this.timezoneList.firstElementChild.remove()}),this}fetchCurrentTimezone(){fetch(this.currentTimezone).then(t=>t.json()).then(t=>{this.city=t.timezone,this.timezoneList.querySelector('[value="'+t.timezone+'"]').setAttribute("selected",""),this.fetchCity(this.city)})}fetchCity(t){fetch(this.worldTimeApi+t).then(t=>t.json()).then(t=>{const e=new Date(t.utc_datetime);this.time.innerText=e.toLocaleTimeString(navigator.language),this.weekday.innerText=e.toLocaleString(navigator.language,{weekday:"short"})})}init(){this.fetchList(),this.fetchCurrentTimezone(),this.timezoneList.addEventListener("change",t=>{this.city=t.target.selectedOptions[0].value,this.fetchCity(this.city)}),setInterval(()=>{this.fetchCity(this.city)},5e3)}}window.watch=new Watch({watch:"[data-entity=web-watch]",city:"[data-entity=city]",time:"[data-entity=time]",weekday:"[data-entity=weekday]"}).init(),document.addEventListener("DOMContentLoaded",function(){});